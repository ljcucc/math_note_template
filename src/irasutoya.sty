\usepackage{xstring}
% \usepackage{graphicx} % Make sure graphicx is included

\newcommand{\irasutoya}[2]{%
  \StrSubstitute{#1}{ }{_}[\imagefilename]% Storing the modified name in \imagefilename
  \IfFileExists{./irasutoya/\imagefilename.png}{}
  {
    \immediate\write18{echo `npx @fand/irasutoya #1`}
    \immediate\write18{wget -O "./src/irasutoya/\imagefilename.png" `npx @fand/irasutoya #1`}
  }% Using the stored filename for wget

  \includegraphics[width=#2]{./irasutoya/\imagefilename.png} \\ % Using the stored filename for includegraphics
}
